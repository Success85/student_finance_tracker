<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rocel | Student Finance Tracker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600;700&display=swap"
    rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js"></script>
  <link rel="stylesheet" href="styles/main.css" />
  <link rel="stylesheet" href="styles/components.css" />
  <link rel="stylesheet" href="styles/responsive.css" />
</head>

<body>
  <a class="skip-link" href="#main-content"></a>
  <div class="nav-overlay" id="navOverlay" aria-hidden="true"></div>

  <aside class="sidebar" id="sidebar" role="navigation" aria-label="Main navigation">
    <div class="sidebar-header">
      <div class="logo">
        <a href="#dashboard"><span class="logo-icon" aria-hidden="true">â—ˆ</span>
          <span class="logo-text">Rocel</span></a>
      </div>
      <button class="sidebar-close" id="sidebarClose" aria-label="Close navigation">âœ•</button>
    </div>

    <nav class="sidebar-nav">
      <ul role="list">
        <li>
          <a href="#dashboard" class="nav-link" data-page="dashboard">
            <span class="nav-icon" aria-hidden="true">â—Ž</span>
            <span>Dashboard</span>
          </a>
        </li>
        <li>
          <a href="#dashboard" class="nav-link" data-filter="all">
            <span class="nav-icon" aria-hidden="true">â†‘</span>
            <span>Transactions</span>
          </a>
        </li>
        <li>
          <a href="#about" class="nav-link" data-page="about">
            <span class="nav-icon" aria-hidden="true">â—‰</span>
            <span>About</span>
          </a>
        </li>
        <li>
          <a href="#settings" class="nav-link" data-page="settings">
            <span class="nav-icon" aria-hidden="true">âš™</span>
            <span>Settings</span>
          </a>
        </li>
      </ul>
    </nav>

    <div class="sidebar-footer">
      <button class="theme-toggle" id="sidebarThemeToggle" aria-label="Toggle dark mode">
        <span class="theme-icon" id="sidebarThemeIcon">â˜¾ </span>
        <span id="themeLabel">Dark Mode</span>
      </button>
      <div class="balance-pill" id="sidebarBalance" aria-label="Current balance">
        <span class="pill-label">Balance</span>
        <span class="pill-value" id="sidebarBalanceValue">â‚¦ 0</span>
      </div>
    </div>
  </aside>

  <header class="topbar" role="banner">
    <button class="hamburger" id="hamburger" aria-label="Open navigation menu" aria-expanded="false"
      aria-controls="sidebar">
      <span class="ham-line"></span>
      <span class="ham-line"></span>
      <span class="ham-line"></span>
    </button>
    <div class="topbar-logo">
      <a href="#dashboard"><span class="logo-icon" aria-hidden="true">â—ˆ</span>
        <span class="logo-text">Rocel</span></a>
    </div>
    <div class="topbar-actions">
      <button class="topbar-icon-btn" id="themeToggleBtn" aria-label="Toggle theme">
        <span class="theme-icon" id="topbarThemeIcon">ðŸŒ™</span>
      </button>
      <div class="topbar-balance" aria-live="polite">
        <span id="topbarBalance">â‚¦ 0</span>
      </div>
    </div>
  </header>

  <main id="main-content" class="main-content" role="main">

    <section id="dashboard" class="page active" aria-label="Dashboard">
      <div class="page-header">
        <div>
          <h1 id="dashboardWelcome">Dashboard</h1>
          <p class="page-subtitle">Manage your finances</p>
        </div>
        <div class="page-actions">
          <button class="btn btn-sm btn-primary" id="openTransactionModal">
            <span aria-hidden="true">âž•</span><span class="btn-label"> Add</span>
          </button>
          <button class="btn btn-sm btn-ghost" id="exportBtn" aria-label="Export data as JSON">
            <span aria-hidden="true">â†‘</span><span class="btn-label"> Export</span>
          </button>
          <label class="btn btn-sm btn-ghost" for="importInput" style="cursor:pointer">
            <span aria-hidden="true">â†“</span><span class="btn-label"> Import</span>
          </label>
          <input type="file" id="importInput" accept=".json" class="sr-only" aria-label="Import JSON file" />
        </div>
      </div>

      <div class="stats-grid" role="region" aria-label="Financial statistics">
        <div class="stat-card income-card">
          <div class="stat-icon" aria-hidden="true">â†‘</div>
          <div class="stat-info">
            <span class="stat-label">Total Income</span>
            <span class="stat-value" id="statIncome">â‚¦ 0</span>
          </div>
        </div>
        <div class="stat-card expense-card">
          <div class="stat-icon" aria-hidden="true">â†“</div>
          <div class="stat-info">
            <span class="stat-label">Total Expenses</span>
            <span class="stat-value" id="statExpense">â‚¦ 0</span>
          </div>
        </div>
        <div class="stat-card balance-card">
          <div class="stat-icon" aria-hidden="true">â—Ž</div>
          <div class="stat-info">
            <span class="stat-label">Net Balance</span>
            <span class="stat-value" id="statBalance">â‚¦ 0</span>
          </div>
        </div>
        <div class="stat-card budget-card">
          <div class="stat-icon" aria-hidden="true">â—‰</div>
          <div class="stat-info">
            <span class="stat-label">Financial Health</span>
            <span class="stat-value" id="statCap">Not set</span>
          </div>
          <div class="budget-bar-wrap" id="budgetBarWrap" aria-hidden="true">
            <div class="budget-bar" id="budgetBar" style="width:0%"></div>
          </div>
          <div role="status" id="profileBudgetSavedMsg" aria-live="polite" class="form-status success"></div>
          <div role="status" id="budgetStatus" aria-live="polite" class="budget-status-msg"></div>
        </div>
      </div>

      <div class="charts-section">
        <div class="chart-card balance-card">
          <h2>Available Balance</h2>
          <div class="big-number" id="balanceAmount">â‚¦ 0</div>
          <div style="height: 280px; position: relative; width: 100%;">
            <canvas id="monthlyChart"></canvas>
          </div>
        </div>
        <div class="chart-card" style="height: 300px; position: relative; padding-bottom: 40px">
          <h3>Spending by Category</h3> 
          <canvas id="categoryPieChart"></canvas>
        </div>
        <div class="chart-card" style="height: 300px; position: relative; padding-bottom: 40px">
          <h3>Income Sources</h3>
          <canvas id="incomeSourceChart"></canvas>
        </div>
        <div class="chart-card" style="height: 200px; position: relative; padding-bottom: 40px">
          <h3>Last 7 days spending Trend</h3>
          <canvas id="balanceSparkline"></canvas>
        </div>
      </div>

      <div class="chart-section" role="region" aria-label="7-day spending trend">
        <h2>Last 7 Days</h2>
        <div class="chart-wrap">
          <div class="bar-chart" id="barChart" role="img" aria-label="7-day bar chart of expenses"></div>
          <div class="chart-labels" id="chartLabels" aria-hidden="true"></div>
        </div>
      </div>

      <div class="forms-row">
        <div class="table-section" role="region" aria-label="Transactions table">
          <div class="table-header">
            <h2>Transactions</h2>
            <div class="table-controls">
              <div class="search-wrap">
                <label for="searchInput" class="sr-only">Search transactions</label>
                <input type="text" id="searchInput" class="search-input" placeholder="Search"
                  aria-describedby="searchHint" autocomplete="off" />
                <button class="search-case-btn" id="caseSensBtn" aria-pressed="false"
                  aria-label="Toggle case sensitive search" title="Case sensitive">Aa</button>
                <span class="search-indicator" id="searchIndicator" aria-live="polite"></span>
              </div>
              <p id="searchHint" class="sr-only">Type a search term or regular expression to filter transactions</p>
              <div class="filter-row">
                <select id="filterType" aria-label="Filter by type">
                  <option value="all">All Types</option>
                  <option value="income">Income</option>
                  <option value="expense">Expense</option>
                </select>
                <select id="filterCategory" aria-label="Filter by category">
                  <option value="all">All Categories</option>
                </select>
                <select id="sortSelect" aria-label="Sort transactions">
                  <option value="date-desc">Newest First</option>
                  <option value="date-asc">Oldest First</option>
                  <option value="amount-desc">Highest Amount</option>
                  <option value="amount-asc">Lowest Amount</option>
                  <option value="desc-asc">A â†’ Z</option>
                  <option value="desc-desc">Z â†’ A</option>
                </select>
              </div>
            </div>
          </div>

          <div class="table-wrap" role="region" aria-label="Scrollable transactions table" tabindex="0">
            <table id="transTable" aria-live="polite">
              <thead>
                <tr>
                  <th scope="col"><button class="sort-btn" data-sort="desc">Description</button></th>
                  <th scope="col"><button class="sort-btn" data-sort="amount">Amount</button></th>
                  <th scope="col">Category</th>
                  <th scope="col"><button class="sort-btn" data-sort="date">Date</button></th>
                  <th scope="col">Type</th>
                  <th scope="col">Actions</th>
                </tr>
              </thead>
              <tbody id="transBody"></tbody>
            </table>
            <div class="table-empty" id="tableEmpty" hidden>
              <p>No transactions found.</p>
            </div>
          </div>
          <div class="table-footer">
            <span id="resultCount" role="status" aria-live="polite">0 transactions</span>
          </div>
        </div>

        <!-- Edit Modal -->
        <div class="modal-backdrop" id="editModal" hidden role="dialog" aria-modal="true"
          aria-labelledby="editModalTitle">
          <div class="modal">
            <div class="modal-header">
              <h2 id="editModalTitle">Edit Transaction</h2>
              <button class="modal-close" id="closeEditModal" aria-label="Close edit dialog">âœ•</button>
            </div>
            <form id="editForm" novalidate aria-label="Edit transaction form">
              <input type="hidden" id="editId" />
              <div class="form-group">
                <label for="editDesc">Description *</label>
                <input type="text" id="editDesc" required aria-describedby="editDescErr" autocomplete="off" />
                <span class="field-error" id="editDescErr" role="alert" aria-live="assertive"></span>
              </div>
              <div class="form-row-2">
                <div class="form-group">
                  <label for="editAmount">Amount (â‚¦) *</label>
                  <input type="text" id="editAmount" required aria-describedby="editAmtErr" />
                  <span class="field-error" id="editAmtErr" role="alert" aria-live="assertive"></span>
                </div>
                <div class="form-group">
                  <label for="editDate">Date *</label>
                  <input type="date" id="editDate" required aria-describedby="editDateErr" />
                  <span class="field-error" id="editDateErr" role="alert" aria-live="assertive"></span>
                </div>
              </div>
              <div class="form-row-2">
                <div class="form-group">
                  <label for="editCategory">Category *</label>
                  <select id="editCategory">
                    <option value="Food">Food</option>
                    <option value="Books">Books</option>
                    <option value="Transport">Transport</option>
                    <option value="Entertainment">Entertainment</option>
                    <option value="Fees">Fees</option>
                    <option value="Salary">Salary</option>
                    <option value="Scholarship">Scholarship</option>
                    <option value="Freelance">Freelance</option>
                    <option value="Gift">Gift</option>
                    <option value="Other">Other</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="editType">Type *</label>
                  <select id="editType">
                    <option value="income">Income</option>
                    <option value="expense">Expense</option>
                  </select>
                </div>
              </div>
              <div role="status" id="editFormStatus" aria-live="polite" class="form-status"></div>
              <div class="modal-actions">
                <button type="button" class="btn btn-ghost" id="cancelEdit">Cancel</button>
                <button type="submit" class="btn btn-primary">Save Changes</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Delete Confirm Modal -->
        <div class="modal-backdrop" id="deleteModal" hidden role="dialog" aria-modal="true"
          aria-labelledby="deleteModalTitle">
          <div class="modal modal-sm">
            <div class="modal-header">
              <h2 id="deleteModalTitle">Delete Transaction</h2>
              <button class="modal-close" id="closeDeleteModal" aria-label="Close delete dialog">âœ•</button>
            </div>
            <p class="modal-body-text">Are you sure you want to delete <strong id="deleteTargetName"></strong>? This
              cannot be undone.</p>
            <div class="modal-actions">
              <button class="btn btn-ghost" id="cancelDelete">Cancel</button>
              <button class="btn btn-danger" id="confirmDelete">Delete</button>
            </div>
          </div>
        </div>

        <!-- Transaction Modal -->
        <div class="modal-backdrop" id="transactionModal" hidden role="dialog" aria-modal="true"
          aria-labelledby="transactionModalTitle">
          <div class="modal modal-large">
            <div class="modal-header add-modal-header">
              <div class="modal-header-top">
                <h2 id="transactionModalTitle">Add Transaction</h2>
                <button class="modal-close" id="closeTransactionModal" aria-label="Close transaction dialog">âœ•</button>
              </div>
              <div class="transaction-type-toggle">
                <button class="type-toggle-btn active" data-type="expense" id="expenseToggle">
                  <span>â†“ Expense</span>
                </button>
                <button class="type-toggle-btn" data-type="income" id="incomeToggle">
                  <span>â†‘ Income</span>
                </button>
              </div>
            </div>
            <form id="transactionForm" novalidate aria-label="Add transaction form">
              <div class="form-group">
                <label for="txDescription">Description *</label>
                <input type="text" id="txDescription" required placeholder="e.g. Coffee with friends"
                  aria-describedby="txDescErr" autocomplete="off" />
                <span class="field-error" id="txDescErr" role="alert" aria-live="assertive"></span>
                <span class="duplicate-warn" id="txDupWarn" role="alert" aria-live="polite"></span>
              </div>
              <div class="form-row-2">
                <div class="form-group">
                  <label for="txAmount">Amount (â‚¦) *</label>
                  <input type="text" id="txAmount" required placeholder="1000" inputmode="numeric"
                    aria-describedby="txAmtErr" />
                  <span class="field-error" id="txAmtErr" role="alert" aria-live="assertive"></span>
                  <div class="currency-hint" id="currencyHint"></div>
                </div>
                <div class="form-group">
                  <label for="txDate">Date *</label>
                  <input type="date" id="txDate" required aria-describedby="txDateErr" />
                  <span class="field-error" id="txDateErr" role="alert" aria-live="assertive"></span>
                </div>
              </div>
              <div class="form-group">
                <label for="txCategory">Category *</label>
                <select id="txCategory" aria-describedby="txCatErr">
                  <option value="">Select category</option>
                </select>
                <span class="field-error" id="txCatErr" role="alert" aria-live="assertive"></span>
              </div>
              <div role="status" id="txFormStatus" aria-live="polite" class="form-status"></div>
              <div class="modal-actions">
                <button type="button" class="btn btn-ghost" id="cancelTransaction">Cancel</button>
                <button type="submit" class="btn btn-primary" id="submitTransaction">
                  <span id="submitBtnText">Add Transaction</span>
                </button>
              </div>
            </form>
          </div>
        </div>
    </section>

    <section id="about" class="page" aria-label="About Rocel">
      <div class="about-wrap">
        <div class="hero">
          <div class="hero-visual" aria-hidden="true">
            <img src="./assets/images/accountant.jpg" alt="" style="width: 100%; border-radius: 20px;">
          </div>
          <div class="hero-text">
            <p class="hero-eyebrow">Student Finance Tracker</p>
            <h1 class="hero-title">Money made simple</h1>
            <p class="hero-subtitle">Rocel helps students take control of their money, track income from jobs and
              scholarships, log daily expenses, visualize trends, and export their data for further analysis. Built with
              accessibility and mobile-first design in mind.</p>
            <div class="hero-actions">
              <button class="btn btn-primary" data-nav="dashboard">Open Dashboard</button>
              <!-- <button class="btn btn-ghost" data-nav="about">Learn More</button> -->
            </div>
          </div>
        </div>

        <section class="features" aria-labelledby="features-title">
          <div class="container">
            <h1 class="features-title">Features of Rocel</h1>
            <p class="features-description">Rocel offers some exclusive features that helps you manage your finances
              effectively!</p>
            <ul class="feature-list">
              <li class="feature">
                <img src="assets/icons/analytics-icon.svg" alt="" width="120" height="120" aria-hidden="true">
                <h3>Expense Tracking</h3>
                <p>Log daily expenses, categorize it, and visualize where your money goes.</p>
              </li>
              <li class="feature">
                <img src="assets/icons/money-icon.svg" alt="" width="120" height="120" aria-hidden="true">
                <h3>Income Management</h3>
                <p>Record stipends, salaries, and win hackathons; view monthly and total income.</p>
              </li>
              <li class="feature">
                <img src="assets/icons/report-icon.svg" alt="" width="120" height="120" aria-hidden="true">
                <h3>Report Generation</h3>
                <p>Export clean summaries (JSON/CSV/PDF) for keeping records and accountability.</p>
              </li>
              <li class="feature">
                <img src="assets/icons/alert-icon.svg" alt="" width="120" height="120" aria-hidden="true">
                <h3>Budgets &amp; Live Alerts</h3>
                <p>Set monthly capacity get gentle warnings before you overspend.</p>
              </li>
            </ul>
          </div>
        </section>

        <section class="contact" id="contact" aria-labelledby="contact-title">
          <div class="container">
            <h1 id="contact-title">Get In Touch</h1>
            <p class="contact-description">Reach out to me for any feedback or questions about Rocel.</p>
            <div class="contact-wrapper">
              <div class="contact-info">
                <ul class="contact-list">
                  <li>
                    <a href="mailto:s.ituma@alustudent.com">s.ituma@alustudent.com</a>
                  </li>
                  <li>
                    <a href="https://github.com/success85" target="_blank"><span></span> @success85</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </section>
      </div>
    </section>

    <div class="keyboard-shortcuts-section" role="region" aria-label="Keyboard shortcuts">
      <h2>Keyboard Shortcuts</h2>
      <div class="shortcuts-grid">
        <div class="shortcut-item">
          <kbd>Ctrl</kbd> + <kbd>H</kbd>
          <span>Go to Home</span>
        </div>
        <div class="shortcut-item">
          <kbd>Ctrl</kbd> + <kbd>S</kbd>
          <span>Go to Settings</span>
        </div>
        <div class="shortcut-item">
          <kbd>/</kbd>
          <span>Focus Search</span>
        </div>
        <div class="shortcut-item">
          <kbd>Esc</kbd>
          <span>Close Modal</span>
        </div>
      </div>
    </div>

    <section id="settings" class="page" aria-label="Settings">
      <div class="settings-wrap">
        <div class="page-header">
          <div>
            <h1>Settings</h1>
            <p class="page-subtitle">Customize your experience</p>
          </div>
        </div>

        <div class="settings-grid">
          <div class="settings-card">
            <h2>Profile &amp; Budget</h2>
            <p class="settings-desc">Set your monthly budget. Your budget
              alerts notify when spending is high.</p>
            <form id="profileBudgetForm" novalidate aria-label="Profile and Budget form">
              <div class="form-group">
                <label for="userName">Your Name *</label>
                <input type="text" id="userName" value="" placeholder="e.g. Jean Paul" maxlength="50"
                  aria-describedby="userNameDesc userNameErr" />
                <span class="field-hint" id="userNameDesc">This will appear in your dashboard welcome message.</span>
                <span class="field-error" id="userNameErr" role="alert" aria-live="assertive"></span>
              </div>
              <div class="form-group">
                <label for="budgetCap">Monthly Budget (â‚¦)</label>
                <input type="number" id="budgetCap" placeholder="e.g. 500.00"
                  aria-describedby="budgetCapDesc budgetCapErr" />
                <span class="field-hint" id="budgetCapDesc">Leave blank to disable budget alerts.</span>
                <span class="field-error" id="budgetCapErr" role="alert" aria-live="assertive"></span>
              </div>
              <div role="status" id="profileBudgetSavedMsg" aria-live="polite" class="form-status success"></div>
              <button type="submit" class="btn btn-primary">Save Settings</button>
              <button type="button" class="btn btn-ghost" id="clearBudgetBtn">Clear Budget</button>
            </form>
          </div>

          <div class="settings-card">
            <h2>Convert Currency</h2>
            <p class="settings-desc">NGN is the base currency. Use the quick converter below to convert to USD or RWF.
            </p>
            <div class="form-group">
              <!-- <label>Base Currency</label> -->
              <!-- <div class="currency-static-badge"> UDS - US Dollar</div>
              <div class="currency-static-badge"> RWF â€” Rwandan Franc</div> -->
            </div>
            <div class="rates-info">
              <div class="rate-row">
                <span>1 â‚¦ â†’ USD</span>
                <strong>0.00069</strong>
              </div>
              <div class="rate-row">
                <span>1 â‚¦ â†’ RWF</span>
                <strong>1.02</strong>
              </div>
            </div>
            <div class="converter-section">
              <h3>Quick Converter</h3>
              <div class="converter-row">
                <input type="text" id="convertInput" placeholder="Amount in NGN"
                  aria-label="Amount in NGN to convert" />
              </div>
              <div class="convert-results" id="convertResults" aria-live="polite"></div>
            </div>
          </div>
        </div>

        <div class="settings-card full-width">
          <h2>Data Management</h2>
          <p class="settings-desc">Export your data as JSON for backup, or import a previously exported file. All
            imports are validated before saving.</p>
          <div class="data-actions">
            <button class="btn btn-primary" id="exportBtnSettings">
              <span aria-hidden="true">â†‘</span> Export JSON
            </button>
            <label class="btn btn-ghost" for="importInputSettings" style="cursor:pointer">
              <span aria-hidden="true">â†“</span> Import JSON
            </label>
            <input type="file" id="importInputSettings" accept=".json" class="sr-only"
              aria-label="Import JSON file from settings" />
            <button class="btn btn-danger" id="clearAllBtn">
              <span aria-hidden="true">âœ•</span> Clear All Data
            </button>
          </div>
          <div role="status" id="dataActionStatus" aria-live="polite" class="form-status"></div>
        </div>
      </div>
    </section>

  </main>

  <footer class="app-footer" role="contentinfo">
    <p>Rocel Â© 2026. Built by <a href="https://www.linkedin.com/in/success-ituma-4176ba263">Success</a></p>
  </footer>

  <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <script type="module" src="scripts/app.js"></script>
</body>

</html>